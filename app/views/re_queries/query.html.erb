<% content_for :header_tags do %>
  <%= javascript_include_tag 'jquery.layout.min.js', :plugin => 'redmine_re' %>
  <%= javascript_include_tag 'jquery.layout.state.js', :plugin => 'redmine_re' %>
  <%= javascript_include_tag 'suggestible.js', :plugin => 'redmine_re' %>
  <%= javascript_include_tag 'suggestible_custom.js', :plugin => 'redmine_re' %>
  <%= javascript_include_tag 'redmine_re.js', :plugin => 'redmine_re' %>
  <%= stylesheet_link_tag 'redmine_re.css', :plugin => "redmine_re", :media => 'all' %>
<% end %>

<div id="infobar" class="ui-layout-west ui-layout-content">
  <%= render "requirements/treebar" %>
</div>

<div id='detail_view' class='ui-layout-center'>
  <h2><%= l(:re_enhanced_filter) %></h2>
  <%= render 'form_and_results', :mode => :apply %>
</div>

<% content_for :sidebar do %>
  <h3>Actions</h3>
  <% if @query.new_record? and !@query.set_by_params? %>
    <%= link_to 'New', {:controller => "re_queries", :action => "new", :project_id => @project.id}, :class => 'icon icon-add' %>
  <% end %>
  <% if @query.set_by_params? %>
    <%= link_to 'Save', @query.to_filter_params.merge({ :action => 'new' }), { :class => 'icon icon-save' } %><br />
    <%= link_to 'Reset', { :action => 'index' }, { :class => 'icon icon-reload' } %>
  <% end %>
<% end %>

<%= render 'sidebar' %>

